<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xzx.xzxms.stock.dao.extend.StockEntryExtendMapper">
    <select id="findEntryByParams" resultType="com.xzx.xzxms.stock.vo.StockEntryVO">
        select * from stock_entry_vo
        <where>
            purchase_item.is_active = 1 and purchase_supply.is_active = 1 and stock_entry.is_active = 1
            <if test="item != null and item != ''">
                and item like CONCAT('%',{#item},'%')
            </if>
            <if test="contractId != null and contractId != ''">
                and contractId = #{contractId}
            </if>
            <if test="beginTime != null and beginTime != ''">
                and stock_entry.time >= #{beginTime}
            </if>
            <if test="endTime != null and endTime != ''">
                and stock_entry.time
            </if>
        </where>
        order by stock_entry.time desc
    </select>
</mapper>